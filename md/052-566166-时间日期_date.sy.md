---
show: step
version: 1.0
enable_checker: true
---

# 日期时间(date)

## 回忆

- 上次学习的是移动(mv)
- mv命令
	- 既可以改名
	- 又可以移动
- mv命令有一些参数
	- -v 显示细节
	- -u 更新文件
	- -i 交互式
	- -f 强制
	- -n 不覆盖
	- --suffix 控制后缀
- 这里面的更新和时间有很大关系
- 每个文件都有三个时间
- 这如何理解呢？

### 日期时间命令date

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663207849961)

- 这个命令就是date
- 可以看到date更详细的用法吗？

### 查看手册

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663209779941)

- 尝试使用

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663209829126)

- 好像加上了时区
	- 我们是东八区
- 这个2822指的是什么呢？

### ietf的rfc

- https://tools.ietf.org/html/rfc2822.html

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663209886721)

- 确实定义了时间和时区
- 不过比较粗糙精确到了秒
- 可以更精细么？

### rfc3339

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663210107804)

- 这篇文档引用了3339

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663210140550)

- 定制时间从2822的2001年到了2002年

### 使用

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663210251199)

- 继续看文档

### 例子

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663210615478)

- 格林威治时间(GMT)
- 太平洋夏令时间(PDT)	
- 中部夏令时间(CDT)
- 这和我们有点远
- 还有什么细节么？

### 格式化字符串
|  参数   | 含义  | 
|  ----  | ----  | 
| %% |  输出字符 % |
| %a |  星期几的缩写 (Sun..Sat) |
| %A |  星期的完整名称(Sunday..Saturday)。  |
| %b |  缩写的月份名称（例如，Jan） |
| %B |  完整的月份名称（例如，January） |
| %c |  本地日期和时间（例如，Thu Mar  3 23:05:25 2005） |
| %C |  世纪，和%Y类似，但是省略后两位（例如，20） |
| %d |  日 (01..31) |
| %D |  日期，等价于%m/%d/%y |
| %e |  一月中的一天，格式使用空格填充，等价于%_d |
| %F |  完整的日期；等价于 %Y-%m-%d |
| %g |  ISO 标准计数周的年份的最后两位数字 |
| %G |  ISO 标准计数周的年份，通常只对%V有用 |
| %h |  等价于 %b |
| %H |  小时 (00..23) |
| %I |  小时 (01..12) |
| %j |  一年中的第几天 (001..366) |
| %k |  小时，使用空格填充 ( 0..23); 等价于 %_H |
| %l |  小时, 使用空格填充 ( 1..12); 等价于 %_I |
| %m |  月份 (01..12) |
| %M |  分钟 (00..59) |
| %n |  新的一行，换行符 |
| %N |  纳秒 (000000000..999999999) |
| %p |  用于表示当地的AM或PM，如果未知则为空白 |
| %P |  类似 %p, 但是是小写的 |
| %r |  本地的 12 小时制时间(例如 11:11:04 PM) |
| %R |  24 小时制 的小时与分钟; 等价于 %H:%M |
| %s |  自 1970-01-01 00:00:00 UTC 到现在的秒数 |
| %S |  秒 (00..60) |
| %t |  插入水平制表符 tab |
| %T |  时间; 等价于 %H:%M:%S |
| %u |  一周中的一天 (1..7); 1 表示星期一 |
| %U |  一年中的第几周，周日作为一周的起始 (00..53) |
| %V |  ISO 标准计数周，该方法将周一作为一周的起始 (01..53) |
| %w |  一周中的一天（0..6），0代表星期天 |
| %W |  一年中的第几周，周一作为一周的起始（00..53） |
| %x |  本地的日期格式（例如，12/31/99） |
| %X |  本地的日期格式（例如，23:13:48） |
| %y |  年份后两位数字 (00..99) |
| %Y |  年 |
| %z |  +hhmm 格式的数值化时区格式（例如，-0400） |
| %:z|  +hh:mm 格式的数值化时区格式（例如，-04:00） |
| %::|z  +hh:mm:ss格式的数值化时区格式（例如，-04:00:00） |
| %::|:z  数值化时区格式，相比上一个格式增加':'以显示必要的精度（例如，-04，+05:30） |
| %Z | 时区缩写 （如 EDT） |

### 具体使用

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663211400583)

- %D 日期
- %T 时间
- %z 时区

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663211531645)

- 这些其实都基于unix时间戳epoch
- 这个在[《oeasy教您玩转python》](https://www.lanqiao.cn/teacher/workbench/courses/3584?tab=labsList)第17个实验《刷新时间》中有详细说明
- 每个文件的元数据中都有三个时间
- 这三个时间怎么理解呢？

### 三个时间

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663212321086)

- 这三个时间怎么理解呢？
- 读文件

### cat读文件

- cat读了之后

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663212406779)


- 最近访问改了
- 最近更改和最近改动没有修改

### echo写文件

- echo写文件之后

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663212541297)

- 最近更改和最近改动修改
- 最近访问没有修改
- 可见最近访问是是否最近被读取
- 最近更改和最近改动有什么区别呢？

### 修改元数据

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663212775409)

- chmod只是改变了文件的权限
- 而没有改变文件的内容
- 所以最近更改时间没有变
- 最近改动时间变了
- 如果我用vi写一下会如何呢？

### vi写并存

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663212885733)

- 三个时间都修改了
	- 最近访问(读)的时间变了
	- 最近更改(元数据)的时间也变了
	- 最近改动(具体文件)也变了
- 这三个时间的英文是什么呢？

### 查看英文

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663213128196)

- time of last access 
	- access
	- 最近访问
	- 最后一次被读取
- time of last status change
	- change
	- 最近更改
	- 最后一次元数据状态更改时间
	- 索引节点(inode)状态变化
- time of last data modification
	- modify
	- 最近改动
	- 最后一次被写入
	- 索引节点(inode)所指向的块(block)中数据的变化

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663213772880)

- windows系统也是这套说法
- 可以在ls中查询到时间的细节么？

### 时间风格

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663216654109)

- 可以用--time-style设置得到时间的参数
- ls 显示的时间究竟是哪个时间呢？

### 实验

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663216767242)

- 默认显示的时间是最近更改
	- 也就是最近写过文件内容的时间
	- modify的时间
- 可以显示其他类型的时间么？

### 查看文档

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663216883984)

- 观察

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663217046187)

- --time=atime	
	- access 上次读取时间
- --time=ctime
	- change 上次状态(status)变化时间
- 不设置--time
	- modify 上次文件本体修改时间
- 输出时间的格式可以自定义么？

### 输出日期形式自定义

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663241192072)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220915-1663241203272)

### 总结
- 我们这次研究了date日期
- 用各种方式显示日期时间
	- 可以用现成的套路
		- date -R
	- 也可以自定义
		- date "+%D-%T %z"
- 每个文件都有三个时间元数据
	- access 上次读取时间
	- change 上次状态变化时间
	- modify 上次写文件时间
- 我们这次都研究时间日期
- 可以有个日历来看看吗？🤔
- 下次再说👋
